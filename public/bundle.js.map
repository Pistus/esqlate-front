{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../src/ui.js","../src/Link.svelte","../node_modules/esqlate-lib/pegjs/parser.js","../node_modules/esqlate-lib/dist/convert.js","../src/controls.js","../node_modules/debounce/index.js","../src/ResultTable.svelte","../src/ParameterDateOrDatetime.svelte","../src/ParameterPopup.svelte","../src/Parameter.svelte","../src/Highlighter.svelte","../src/MainLinks.svelte","../src/App.svelte","../node_modules/esqlate-waitfor/dist/index.js","../src/getFullUrlFromResponseUrl.js","../src/io.js","../src/middleware.js","../node_modules/esqlate-cache/dist/index.js","../src/promiseChain.js","../src/user-actions.js","../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n        : ctx.$$scope.ctx;\n}\nfunction get_slot_changes(definition, ctx, changed, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n        : ctx.$$scope.changed || {};\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\nfunction run_tasks() {\n    tasks.forEach(task => {\n        if (!task[0](now())) {\n            tasks.delete(task);\n            task[1]();\n        }\n    });\n    running = tasks.size > 0;\n    if (running)\n        raf(run_tasks);\n}\nfunction clear_loops() {\n    // for testing...\n    tasks.forEach(task => tasks.delete(task));\n    running = false;\n}\nfunction loop(fn) {\n    let task;\n    if (!running) {\n        running = true;\n        raf(run_tasks);\n    }\n    return {\n        promise: new Promise(fulfil => {\n            tasks.add(task = [fn, fulfil]);\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update($$.dirty);\n        run_all($$.before_update);\n        $$.fragment && $$.fragment.p($$.dirty, $$.ctx);\n        $$.dirty = null;\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = key && { [key]: value };\n        const child_ctx = assign(assign({}, info.ctx), info.resolved);\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = { [info.value]: promise };\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(changed, child_ctx);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += \" \" + name + \"=\" + JSON.stringify(String(value)\n                .replace(/\"/g, '&#34;')\n                .replace(/'/g, '&#39;'));\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    if (has_prop(component.$$.props, name)) {\n        name = component.$$.props[name] || name;\n        component.$$.bound[name] = callback;\n        callback(component.$$.ctx[name]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = {};\n    }\n}\nfunction make_dirty(component, key) {\n    if (!component.$$.dirty) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty = blank_object();\n    }\n    component.$$.dirty[key] = true;\n}\nfunction init(component, options, instance, create_fragment, not_equal, props) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty: null\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (key, ret, value = ret) => {\n            if ($$.ctx && not_equal($$.ctx[key], $$.ctx[key] = value)) {\n                if ($$.bound[key])\n                    $$.bound[key](value);\n                if (ready)\n                    make_dirty(component, key);\n            }\n            return ret;\n        })\n        : prop_values;\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, detail));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","import { safe_not_equal, noop, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getStep(decimalPlaceCount) {\n    let i = 0;\n    let r = \"0.\";\n    while (i++ < decimalPlaceCount) {\n        if (i >= decimalPlaceCount) {\n            return r + \"1\";\n        }\n        r = r + \"0\";\n    }\n    return \"1\";\n}\nexports.getStep = getStep;\nfunction initializeDateTime(control) {\n    const indexOfT = control.value.indexOf('T');\n    const date = control.date ?\n        control.date :\n        indexOfT > -1 ?\n            control.value.substring(0, indexOfT) :\n            \"\";\n    const time = control.time ?\n        control.time :\n        indexOfT > -1 ?\n            control.value.substring(indexOfT + 1) :\n            \"\";\n    return { value: (date && time) ? date + 'T' + time : '', date, time };\n}\nexports.initializeDateTime = initializeDateTime;\nvar ProcessDateTimeWhich;\n(function (ProcessDateTimeWhich) {\n    ProcessDateTimeWhich[\"DATE\"] = \"DATE\";\n    ProcessDateTimeWhich[\"TIME\"] = \"TIME\";\n})(ProcessDateTimeWhich = exports.ProcessDateTimeWhich || (exports.ProcessDateTimeWhich = {}));\nfunction processDateTime(control, which) {\n    const indexOfT = control.value.indexOf('T');\n    let date = control.value.substring(0, indexOfT);\n    let time = control.value.substring(indexOfT + 1);\n    if ((!date) || (which == ProcessDateTimeWhich.DATE)) {\n        date = control.date || \"\";\n    }\n    if ((!time) || (which == ProcessDateTimeWhich.TIME)) {\n        time = control.time || \"\";\n    }\n    return { value: (date && time) ? date + 'T' + time : '', date, time };\n}\nexports.processDateTime = processDateTime;\nfunction getHightlightPositions(params, bitOfSql) {\n    function findAll(s, substring) {\n        let lastPos = -1;\n        let ret = [];\n        while (!ret.some((r) => r === -1)) {\n            lastPos = s.indexOf(substring, lastPos + 1);\n            ret.push(lastPos);\n        }\n        return ret\n            .filter((r) => r !== -1)\n            .filter((r) => {\n            return (((r == 0) || (!bitOfSql[r - 1].match(/[a-z0-9_]/))) &&\n                ((r + substring.length >= bitOfSql.length) || (!bitOfSql[r + substring.length].match(/[a-z0-9_]/))));\n        })\n            .map((r) => {\n            return { begin: r, end: substring.length + r };\n        });\n    }\n    return (params || []).filter((p) => p !== undefined).reduce((acc, param) => {\n        return acc.concat(findAll(bitOfSql, \"\" + param));\n    }, []);\n}\nexports.getHightlightPositions = getHightlightPositions;\nvar LineType;\n(function (LineType) {\n    LineType[\"Field\"] = \"Field\";\n    LineType[\"String\"] = \"String\";\n})(LineType = exports.LineType || (exports.LineType = {}));\nfunction getHightlightString(highlightPositions, bitOfSql) {\n    const sorted = highlightPositions.concat([]).sort((hpa, hpb) => hpa.begin - hpb.begin);\n    let begin = 0;\n    const r = [];\n    sorted.forEach((hp) => {\n        if (begin > hp.begin) {\n            return;\n        }\n        r.push({ type: LineType.String, value: bitOfSql.substring(begin, hp.begin) });\n        r.push({ type: LineType.Field, value: bitOfSql.substring(hp.begin, hp.end) });\n        begin = hp.end;\n    });\n    r.push({ type: LineType.String, value: bitOfSql.substring(begin) });\n    return r;\n}\nexports.getHightlightString = getHightlightString;\n","<script>\n  export let link;\n</script>\n<a href={link.href} class={link.class ? link.class : \"\"}>{link.text}</a>\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { Statement: peg$parseStatement },\n      peg$startRuleFunction  = peg$parseStatement,\n\n      peg$c0 = \"{\",\n      peg$c1 = peg$literalExpectation(\"{\", false),\n      peg$c2 = \"}\",\n      peg$c3 = peg$literalExpectation(\"}\", false),\n      peg$c4 = function(f, v) {return { function: (f && f.length) ? f : \"noop\", variable: v } },\n      peg$c5 = \" \",\n      peg$c6 = peg$literalExpectation(\" \", false),\n      peg$c7 = function(v, vs) { return [v].concat(vs.map(([a, b]) => b)); },\n      peg$c8 = function(f) { return f.reduce((acc, i) => acc + i, \"\") },\n      peg$c9 = function(v) { return { type: \"VARIABLE\", function: \"noop\", variable: [v] } },\n      peg$c10 = function(t) { return { type: \"TEXT\", text: t.reduce((acc, i) => acc + i, \"\") } },\n      peg$c11 = \"$$\",\n      peg$c12 = peg$literalExpectation(\"$$\", false),\n      peg$c13 = function() { return \"$\" },\n      peg$c14 = \"$\",\n      peg$c15 = peg$literalExpectation(\"$\", false),\n      peg$c16 = /^[^a-z{$]/,\n      peg$c17 = peg$classExpectation([[\"a\", \"z\"], \"{\", \"$\"], true, false),\n      peg$c18 = function(x) { return \"$\" + x },\n      peg$c19 = /^[a-z]/,\n      peg$c20 = peg$classExpectation([[\"a\", \"z\"]], false, false),\n      peg$c21 = /^[a-z_]/,\n      peg$c22 = peg$classExpectation([[\"a\", \"z\"], \"_\"], false, false),\n      peg$c23 = function(v, vs) { return v + vs.reduce((acc, i) => acc + i, \"\") },\n      peg$c24 = /^[^$]/,\n      peg$c25 = peg$classExpectation([\"$\"], true, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parseStatement() {\n    var s0, s1;\n\n    s0 = [];\n    s1 = peg$parseComplexFunction();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parseSimpleVariable();\n      if (s1 === peg$FAILED) {\n        s1 = peg$parseText();\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parseComplexFunction();\n        if (s1 === peg$FAILED) {\n          s1 = peg$parseSimpleVariable();\n          if (s1 === peg$FAILED) {\n            s1 = peg$parseText();\n          }\n        }\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseComplexFunction() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseDollar();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 123) {\n        s2 = peg$c0;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c1); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseFunctionCall();\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseComplexVariable();\n          if (s4 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 125) {\n              s5 = peg$c2;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c3); }\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c4(s3, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseComplexVariable() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseValidVariableName();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s4 = peg$c5;\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseValidVariableName();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 32) {\n          s4 = peg$c5;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseValidVariableName();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c7(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseFunctionCall() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseFunction();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s2 = peg$c5;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c8(s1);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseSimpleVariable() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseDollar();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseValidVariableName();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c9(s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseText() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parseErrorDollar();\n    if (s2 === peg$FAILED) {\n      s2 = peg$parseEscapedDollar();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parseNotDollar();\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseErrorDollar();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseEscapedDollar();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parseNotDollar();\n          }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c10(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseEscapedDollar() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 2) === peg$c11) {\n      s1 = peg$c11;\n      peg$currPos += 2;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c12); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c13();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseErrorDollar() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 36) {\n      s1 = peg$c14;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c16.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c17); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c18(s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseFunction() {\n    var s0, s1;\n\n    s0 = [];\n    if (peg$c19.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c20); }\n    }\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (peg$c19.test(input.charAt(peg$currPos))) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseValidVariableName() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c19.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c20); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (peg$c21.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c22); }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (peg$c21.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c22); }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c23(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseNotDollar() {\n    var s0;\n\n    if (peg$c24.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c25); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseDollar() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 36) {\n      s0 = peg$c14;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n\n    return s0;\n  }\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* tslint:disable */\nvar parser = require(\"../pegjs/parser\");\nvar ParsedType;\n(function (ParsedType) {\n    ParsedType[\"TEXT\"] = \"TEXT\";\n    ParsedType[\"VARIABLE\"] = \"VARIABLE\";\n})(ParsedType = exports.ParsedType || (exports.ParsedType = {}));\nfunction rawParse(s) {\n    return parser.parse(s);\n}\nexports.rawParse = rawParse;\nfunction removeLineBeginningWhitespace(s) {\n    var postNewlineRemove = s.replace(/^\\n/, \"\").match(/^([ \\t]*)/);\n    if (!postNewlineRemove) {\n        return s;\n    }\n    return s.split(\"\\n\").map(function (line) {\n        if (line.indexOf(postNewlineRemove[1]) === 0) {\n            return line.replace(postNewlineRemove[1], \"\");\n        }\n        return line;\n    }).join(\"\\n\");\n}\nexports.removeLineBeginningWhitespace = removeLineBeginningWhitespace;\nfunction normalize(parameters, statement) {\n    var ret = typeof statement === \"string\" ?\n        [statement] :\n        statement;\n    function getParameter(findingName) {\n        var r = parameters.find(function (_a) {\n            var name = _a.name;\n            return name === findingName;\n        });\n        if (r === undefined) {\n            throw new Error(\"Statement refers to parameter \" + findingName + \" but it does not exist\");\n        }\n        return r;\n    }\n    function parameterReducer(acc, stat) {\n        if (typeof stat !== \"string\") {\n            return acc.concat(stat);\n        }\n        return rawParse(stat).reduce(function (innerAcc, item) {\n            if (item.type === ParsedType.TEXT) {\n                return innerAcc.concat(item.text);\n            }\n            if (item.function !== \"noop\") {\n                throw new Error(\"The function for a variable must be noop\");\n            }\n            if (item.variable.length !== 1) {\n                throw new Error(\"Only one variable for a ${} is allowed\");\n            }\n            return innerAcc.concat(getParameter(item.variable[0]));\n        }, acc);\n    }\n    return ret.reduce(parameterReducer, []);\n}\nexports.normalize = normalize;\nfunction newlineBreak(statement) {\n    function allButLast(ar) {\n        var ret = [];\n        for (var i = 0; i < ar.length - 1; i++) {\n            ret.push(ar[i]);\n        }\n        return ret;\n    }\n    function last(ar) {\n        if (ar.length === 0) {\n            throw new Error(\"newlineBreak: list: Empty\");\n        }\n        return ar[ar.length - 1];\n    }\n    function reducer(acc, item) {\n        if (typeof item !== \"string\") {\n            return __spread(allButLast(acc), [\n                last(acc).concat([item]),\n            ]);\n        }\n        var _a = __read(item.split(/[\\r\\n]/)), split0 = _a[0], splitRest = _a.slice(1);\n        return __spread(allButLast(acc), [\n            last(acc).concat([split0]),\n        ]).concat(splitRest.map(function (r) { return [r]; }));\n    }\n    return statement.reduce(reducer, [[]]);\n}\nexports.newlineBreak = newlineBreak;\nfunction html_line(statement) {\n    function pre(s) {\n        var r = s.replace(\"\\t\", \"    \");\n        var m = r.match(/^ +/);\n        if (m === null) {\n            return r;\n        }\n        return m[0].replace(/ /g, \" \") + r.substr(m[0].length);\n    }\n    function mapper(ed) {\n        if (typeof ed === \"string\") {\n            return { tagIdClass: \"span\", inner: pre(ed), attrs: {} };\n        }\n        ed = ed;\n        if (ed.type === \"select\") {\n            return {\n                tagIdClass: \"select\",\n                inner: [],\n                attrs: { name: ed.name },\n            };\n        }\n        if (ed.type === \"string\") {\n            return { tagIdClass: \"input\", inner: [], attrs: { name: ed.name } };\n        }\n        if (ed.type === \"integer\") {\n            return { tagIdClass: \"input\", inner: [], attrs: { name: ed.name, type: \"number\" } };\n        }\n        if (ed.type === \"server\") {\n            return { tagIdClass: \"span\", inner: \"$\" + pre(ed.name), attrs: {} };\n        }\n        throw new Error(\"Unknown parameter type \" + ed.type);\n    }\n    return {\n        tagIdClass: \"div.line\",\n        inner: statement.map(mapper),\n        attrs: {},\n    };\n}\nexports.html_line = html_line;\nfunction html(statement) {\n    return {\n        tagIdClass: \"div\",\n        attrs: {},\n        inner: newlineBreak(statement).map(html_line),\n    };\n}\nexports.html = html;\nfunction forHyper(h, hdoc) {\n    return h([\n        hdoc.tagIdClass,\n        hdoc.inner instanceof Array ?\n            hdoc.inner.map(function (hd) {\n                if (hd instanceof String) {\n                    return hd;\n                }\n                return forHyper(h, hd);\n            }) :\n            hdoc.inner,\n        hdoc.attrs,\n    ]);\n}\nexports.forHyper = forHyper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst esqlate_lib_1 = require(\"esqlate-lib\");\nfunction urlSearchParamsToArguments(url) {\n    let o = [];\n    for (let [k, v] of url.entries()) {\n        o.push({ name: k, val: v });\n    }\n    return o;\n}\nexports.urlSearchParamsToArguments = urlSearchParamsToArguments;\n/**\n * Merges `esqArg` and `cs` with cs taking precedence.\n */\nfunction addControlStoreToEsqlateQueryComponents(cs, esqArg) {\n    const fromCs = new Set(Object.getOwnPropertyNames(cs));\n    function getValue(o) {\n        if (!o.hasOwnProperty(\"value\")) {\n            return \"\";\n        }\n        return o.value;\n    }\n    return Object.getOwnPropertyNames(cs).reduce((acc, k) => {\n        return acc.concat([{ name: k, val: getValue(cs[k]) }]);\n    }, esqArg.filter(({ name }) => !fromCs.has(name)));\n}\nexports.addControlStoreToEsqlateQueryComponents = addControlStoreToEsqlateQueryComponents;\nfunction getControlStore(query, esqlateDefinitionParameters, optionsForSelect) {\n    const inputValues = query.reduce((acc, { name, val }) => {\n        acc.set(name, val);\n        return acc;\n    }, new Map());\n    function getOptions(parameter) {\n        const ps = optionsForSelect.filter(o => o.parameter.name == parameter.name);\n        if (ps.length === 0) {\n            return [];\n        }\n        const result = ps[0].result;\n        if ((result.status != \"preview\") && (result.status != \"complete\")) {\n            return [];\n        }\n        let valueIndex = -1;\n        let displayIndex = -1;\n        result.fields.forEach((fld, index) => {\n            if (fld.name == parameter.value_field) {\n                valueIndex = index;\n            }\n            if (fld.name == parameter.display_field) {\n                displayIndex = index;\n            }\n        });\n        if ((valueIndex == -1) || (displayIndex == -1)) {\n            return [];\n        }\n        return (result.rows).map((row) => {\n            return {\n                display: \"\" + row[displayIndex],\n                value: \"\" + row[valueIndex]\n            };\n        });\n    }\n    function selectSetValue(value, options) {\n        if (options.some((op) => op.value == value)) {\n            return value;\n        }\n        if (options.length) {\n            return options[0].value;\n        }\n        return \"\";\n    }\n    function reducer(acc, item) {\n        let value = \"\";\n        if (inputValues.has(item.name)) {\n            value = inputValues.get(item.name);\n        }\n        if (item.type == \"select\") {\n            const options = getOptions(item);\n            return Object.assign(Object.assign({}, acc), { [item.name]: {\n                    options,\n                    value: selectSetValue(value, options)\n                } });\n        }\n        return Object.assign(Object.assign({}, acc), { [item.name]: { value } });\n    }\n    return esqlateDefinitionParameters.reduce(reducer, {});\n}\nexports.getControlStore = getControlStore;\nfunction serializeValues(values) {\n    return values.map((ea) => {\n        const v = (ea.val === undefined) ? \"\" : encodeURIComponent(ea.val);\n        return `${encodeURIComponent(ea.name)}=${v}`;\n    }).join('&');\n}\nexports.serializeValues = serializeValues;\nfunction normalizeLink(namesOfFields, e) {\n    const params = new Set(namesOfFields.map((n) => n));\n    const parameterCounts = {\n        \"noop\": 1,\n        \"popup\": 2,\n    };\n    function process(textOrHref) {\n        const parsed = esqlate_lib_1.rawParse(textOrHref);\n        return parsed.map((par) => {\n            if (par.type == esqlate_lib_1.ParsedType.TEXT) {\n                return par.text;\n            }\n            if (parameterCounts[par.function] != par.variable.length) {\n                throw new Error(`Function ${par.function} takes ${parameterCounts[par.function]} parameters`);\n            }\n            par.variable.forEach((v) => {\n                if (!params.has(v)) {\n                    throw new Error(\"Variable ${v} in link template, but not a known variable\");\n                }\n            });\n            return { namesOfFields: par.variable, fun: par.function };\n        });\n    }\n    return {\n        class: e.hasOwnProperty(\"class\") ? e.class : \"\",\n        text: e.text ? process(e[\"text\"]) : process(e[\"href\"]),\n        href: process(e[\"href\"])\n    };\n}\nexports.normalizeLink = normalizeLink;\nfunction asRow(rawRow, fields, args) {\n    const argsAsOb = args.reduce((acc, arg) => {\n        return Object.assign(Object.assign({}, acc), { [arg.name]: arg.val });\n    }, {});\n    return fields.reduce((acc, field, index) => {\n        return Object.assign(Object.assign({}, acc), { [field.name]: rawRow[index] });\n    }, argsAsOb);\n}\nexports.asRow = asRow;\nfunction renderLinkText(s, row, escape) {\n    if (typeof s == \"string\") {\n        throw new Error(\"renderLink: Requires normalizeLink to be called first: \" + s);\n    }\n    function getParameters(nofs) {\n        return nofs.map((nof) => {\n            return \"\" + row[nof] || \"\";\n        });\n    }\n    function callF(ela) {\n        if (ela.fun == \"noop\") {\n            return getParameters(ela.namesOfFields)[0];\n        }\n        if (ela.fun == \"popup\") {\n            const params = getParameters(ela.namesOfFields);\n            if (params.length != 2) {\n                throw new Error(\"generation of a popup link requires 2 params\");\n            }\n            return encodeURIComponent(params[0]) + \" \" +\n                encodeURIComponent(params[1]);\n        }\n        throw new Error(`Unknown function '${ela.fun}'`);\n    }\n    return s.reduce((acc, ei) => {\n        if (typeof ei == \"string\") {\n            return acc = acc + ei;\n        }\n        if (escape) {\n            return acc + encodeURIComponent(callF(ei));\n        }\n        return acc + callF(ei);\n    }, \"\");\n}\nfunction getLink(e, row) {\n    const text = e.hasOwnProperty(\"text\") ? e.text : e.href;\n    return {\n        text: renderLinkText(text, row, false),\n        href: renderLinkText(e.href, row, true),\n        class: e.hasOwnProperty(\"class\") ? e.class : \"\",\n    };\n}\nexports.getLink = getLink;\nfunction addBackValuesToControlStore(qry, csv) {\n    return qry.reduce((acc, esqArg) => {\n        const m = esqArg.name.match(/^_b[a-z]{1,9}([0-9]{1,3})/);\n        if (!m) {\n            return acc;\n        }\n        return Object.assign(Object.assign({}, acc), { [m[0]]: { value: \"\" + esqArg.val } });\n    }, csv);\n}\nexports.addBackValuesToControlStore = addBackValuesToControlStore;\nfunction getBackNumber(qry) {\n    return qry.reduce((acc, esqArg) => {\n        const m = esqArg.name.match(/^_burl([0-9]{1,3})/);\n        if (!m) {\n            return acc;\n        }\n        if (parseInt(m[1]) > acc) {\n            return parseInt(m[1]);\n        }\n        return acc;\n    }, -1);\n}\nfunction popBackFromArguments(qry) {\n    const desiredNumber = getBackNumber(qry);\n    if ((desiredNumber < 0)) {\n        throw new Error(\"popBackFromArguments: No back links found\");\n    }\n    return qry.reduce((acc, esqArg) => {\n        const m = esqArg.name.match(/^_b([a-z]{0,9})([0-9]{1,3})/);\n        if (!m) {\n            return acc;\n        }\n        if (parseInt(m[2]) == desiredNumber) {\n            return Object.assign(Object.assign({}, acc), { [m[1]]: decodeURIComponent(esqArg.val) });\n        }\n        return acc;\n    }, { url: '', fld: '', def: '', dis: '', val: '' });\n}\nexports.popBackFromArguments = popBackFromArguments;\nfunction pushBackToControlStore(qry, url) {\n    const desiredNumber = Object.getOwnPropertyNames(qry).reduce((acc, esqArg) => {\n        const m = esqArg.match(/^_burl([0-9]{1,3})/);\n        if (!m) {\n            return acc;\n        }\n        if (parseInt(m[1]) > acc) {\n            return parseInt(m[1]);\n        }\n        return acc;\n    }, -1);\n    return Object.assign(Object.assign({}, qry), { [\"_burl\" + (desiredNumber + 1)]: { value: url.url }, [\"_bfld\" + (desiredNumber + 1)]: { value: url.fld }, [\"_bdef\" + (desiredNumber + 1)]: { value: url.def }, [\"_bdis\" + (desiredNumber + 1)]: { value: url.dis }, [\"_bval\" + (desiredNumber + 1)]: { value: url.val } });\n}\nexports.pushBackToControlStore = pushBackToControlStore;\nfunction queryComponentsToArguments(params, queryComps) {\n    // Popups are treated specially as thier value is urlencoded in the UI.\n    const popups = new Set(params\n        .filter((p) => p.type == \"popup\")\n        .map((p) => p.name));\n    const mapper = (qc) => {\n        const v = qc.val === undefined ? \"\" : qc.val;\n        if (popups.has(qc.name)) {\n            const value = decodeURIComponent((\"\" + v).replace(/ .*/, \"\"));\n            return { name: qc.name, value };\n        }\n        return { name: qc.name, value: v };\n    };\n    const filterer = (a) => {\n        return a.name.substring(0, 1) !== \"#\";\n    };\n    return queryComps.map(mapper).filter(filterer);\n}\nexports.queryComponentsToArguments = queryComponentsToArguments;\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","<script>\n  import Link from \"./Link.svelte\";\n  import { onDestroy, beforeUpdate, afterUpdate } from 'svelte';\n  import { writable, get as getStoreValue } from 'svelte/store';\n  import { asRow, normalizeLink, getLink } from \"./controls\";\n  import debounce from \"debounce\";\n\n  export let definition;\n  export let controls;\n\n  export let result;\n  export let inPopup;\n  export let pick;\n  export let showDownloads;\n\n  const id = inPopup ? \"in-popup-results\" : \"out-popup-results\";\n\n  function syncTable() {\n\n    function resetStylesheet() {\n      const stylesheet = document.getElementById(id + \"-style\").sheet;\n      for (let i = 0; i < stylesheet.rules.length; i++) {\n        stylesheet.removeRule(0);\n      }\n      return stylesheet;\n    }\n\n    const stylesheet = resetStylesheet();\n\n    const requiredWidth = document.getElementById(\"code-input-area\") ?\n      document.getElementById(\"code-input-area\").getBoundingClientRect().width :\n      640;\n\n    stylesheet.insertRule(`#table-holder { min-width: ${requiredWidth}px }`);\n  }\n\n  function alignment(field) {\n    if (\n      (field.type.indexOf(\"text\") > -1) ||\n      (field.type.indexOf(\"char\") > -1) ||\n      (field.type.indexOf(\"date\") > -1) ||\n      (field.type.indexOf(\"time\") > -1)\n    ) {\n      return \"left\";\n    }\n    return \"right\";\n  }\n\n  const dateFormatter = new Intl.DateTimeFormat(window.navigator.language, { year: 'numeric', month: '2-digit', day: '2-digit' });\n  const timestampFormatter = new Intl.DateTimeFormat(window.navigator.language, { hour: 'numeric', minute: 'numeric', second: 'numeric', year: 'numeric', month: '2-digit', day: '2-digit' });\n  const formatters = {\n    \"date\": (s) => dateFormatter.format(new Date(s)),\n    \"timestamp\": (s) => timestampFormatter.format(new Date(s)),\n  }\n\n  function getFormatter(sqlType) {\n    if (formatters.hasOwnProperty(sqlType)) {\n      return formatters[sqlType];\n    }\n    return null;\n  }\n\n\n  let args = [];\n\n  function getValuesFromControls(currentControls) {\n    return Object.getOwnPropertyNames(currentControls || {}).map(\n      (name) => {\n        return { name: name, val: currentControls[name].value }\n      }\n    )\n  }\n\n  function getValuesFromResults(currentResults) {\n    if (!currentResults || !currentResults.rows || !currentResults.rows.length) {\n      return [];\n    }\n    return currentResults.fields.map((fld, i) => {\n      return { name: fld.name, val: currentResults.rows[0][i] };\n    });\n  }\n\n  $: args = getValuesFromControls(controls).concat(getValuesFromResults(result));\n\n\n  function getFieldnames(myArgs) {\n    return myArgs.map(({name}) => name).concat(\n      (result && result.fields) ? (result.fields || []).map(({name}) => name) : []\n    );\n  }\n\n  afterUpdate(syncTable);\n  window.onresize = debounce(syncTable, 200);\n</script>\n<style>\n  #table-holder {\n    max-height: 400px;\n    overflow-y: scroll;\n  }\n  #table-holder table th {\n    position: sticky;\n    top: 0;\n    z-index: 2;\n    background-color: #dadee4;\n  }\n</style>\n<div id={id}>\n  <style id={ id + \"-style\" }>\n  </style>\n  {#if result && ((result.status == \"complete\") || (result.status == \"preview\"))}\n  <div class=\"columns\">\n    <div class=\"column col-auto\" style=\"margin: 0 auto\">\n      <div id=\"table-holder\">\n      <table class=\"results-head table table-striped table-hover\" style=\"padding-bottom: 0; margin: 0\">\n        <thead>\n          <tr>\n            {#each result.fields as field}\n            <th style={ \"text-align: \" + alignment(field) }>{field.name}</th>\n            {/each}\n            {#if (definition.row_links && definition.row_links.length) || inPopup}\n            <th></th>\n            {/if}\n          </tr>\n        </thead>\n        <tbody>\n          {#each result.rows || [] as row}\n          <tr>\n            {#each row as cell, i}\n            <td style={ \"text-align: \" + alignment(result.fields[i]) }>\n              {#if cell === null}\n              NULL\n              {:else if getFormatter(result.fields[i].type)}\n              { getFormatter(result.fields[i].type)(cell) }\n              {:else}\n              {cell}\n              {/if}\n            </td>\n            {/each}\n            {#if (definition.row_links && definition.row_links.length) || inPopup}\n            {#if inPopup}\n            <td style=\"text-align: center\">\n              <button class=\"btn btn-link\" on:click={c => pick(row)}>Pick</button>\n            </td>\n            {:else}\n            <td style=\"text-align: left\">\n              {#each definition.row_links  || [] as link}\n              <Link link={getLink(normalizeLink(getFieldnames(args), link), asRow(row, result.fields, args)) }/>\n              {/each}\n            </td>\n            {/if}\n            {/if}\n          </tr>\n          {/each}\n        </tbody>\n      </table>\n      </div>\n      {#if inPopup}\n        {#if !result.full_data_set }\n        <div class=\"toast toast-warning toast-resultset-warning\">\n          ⚠ The result set is very large and not all results are shown.\n        </div>\n        {/if}\n      {:else if !result.full_data_set }\n        <div class=\"toast toast-warning toast-resultset-warning\" >\n          ⚠ Warning: This result set is very large and not all are shown. If you want to see the full results you will have to <a href=\"#show-downloads\" on:click|preventDefault={showDownloads}>download them</a>.\n        </div>\n      {:else}\n        <div class=\"toast toast-success toast-resultset-warning\">\n          All the results are showing but you can sitill <a href=\"#show-downloads\" on:click|preventDefault={showDownloads}>download the results</a>.\n        </div>\n      {/if}\n    </div>\n  </div>\n  {/if}\n</div>\n","<script>\nimport { createEventDispatcher } from 'svelte';\nimport { onDestroy } from 'svelte';\nimport { initializeDateTime, processDateTime } from './ui';\nimport { get as getStoreValue, writable } from 'svelte/store';\n\nexport let parameter;\nexport let control;\nexport let onblur;\nexport let onfocus;\nexport let onerror;\nexport let onfix;\n\n\nconst dispatchNewValue = createEventDispatcher();\n\nfunction emptyCheck() {\n  if (!parameter.empty_string_is_null) {\n    control.value != \"\" ?  onfix(parameter.name, parameter.highlight_fields) : onerror(parameter.name, parameter.highlight_fields);\n  }\n}\n\nfunction onchangedate({ target: { value: evtValue} }) {\n    try {\n      control = processDateTime({ ...control, date: evtValue }, \"DATE\");\n      dispatchNewValue(\"newvalue\", { name: parameter.name, control });\n      emptyCheck();\n    } catch (e) {\n      onerror(parameter.name, parameter.highlight_fields);\n    }\n}\n\nfunction onchangetime({ target: { value: evtValue } }) {\n    try {\n      control = {...processDateTime({ ...control, time: evtValue }, \"TIME\")};\n      dispatchNewValue(\"newvalue\", { name: parameter.name, control });\n      emptyCheck();\n    } catch (e) {\n      onerror(parameter.name, parameter.highlight_fields);\n    }\n}\n\nemptyCheck();\n\n</script>\n<input data-highlight-fields={JSON.stringify(parameter.highlight_fields)}\n       on:focus={onfocus}\n       on:blur={onblur}\n       id={ \"input-\" + parameter.name }\n       data-parameter-name={parameter.name}\n       type=\"date\"\n       on:change={onchangedate}\n       value={initializeDateTime(control).date || \"\"}/>\n<input data-highlight-fields={JSON.stringify(parameter.highlight_fields)}\n       on:focus={onfocus}\n       on:blur={onblur}\n       id={ \"input-\" + parameter.name + \"-time\" }\n       data-parameter-name={parameter.name}\n       type=\"time\"\n       on:change={onchangetime}\n       value={initializeDateTime(control).time || \"\"}/>\n","<script>\nexport let parameter;\nexport let control;\nexport let popup\nexport let onerror;\nexport let onfix;\n\nfunction getDisplayValue(controlValue) {\n  return decodeURIComponent(\n    controlValue.substr(controlValue.indexOf(\" \") + 1)\n  );\n}\n\nif (!parameter.empty_string_is_null) {\n  control.value != \"\" ?\n    onfix(parameter.name, parameter.highlight_fields) :\n    onerror(parameter.name, parameter.highlight_fields);\n}\n\n</script>\n<strong>\n  <button data-parameter-name={parameter.name} class=\"input-popup\" on:click={() => popup(parameter.name)}>\n    <div>{getDisplayValue(control.value)}</div>&nbsp;⯅\n  </button>\n</strong>\n\n","<script>\n\n  import { createEventDispatcher } from 'svelte';\n  const dispatchNewValue = createEventDispatcher();\n\n  import ParameterDateOrDatetime from \"./ParameterDateOrDatetime.svelte\";\n  import ParameterPopup from \"./ParameterPopup.svelte\";\n  import { getStep } from \"./ui\";\n  export let parameter;\n  export let control;\n  export let popup;\n  export let onfocus;\n  export let onblur;\n  export let onerror;\n  export let onfix;\n\n  function validator(validationFunc) {\n    return function() {\n      if (!validationFunc(control.value)) {\n        return onerror(parameter.name, parameter.highlight_fields);\n      }\n      onfix(parameter.name, parameter.highlight_fields);\n      dispatchNewValue(\n        \"newvalue\",\n        { name: parameter.name, control }\n      );\n    }\n  }\n\n  function isDateOk() {\n    if ((parameter.empty_string_is_null) && (control.value == \"\")) {\n      return true;\n    }\n    return (\"\" + control.value).match(/\\d\\d\\d\\d\\-\\d\\d-\\d\\d/);\n  }\n\n  function isIntegerOk() {\n    if ((parameter.empty_string_is_null) && (control.value == \"\")) {\n      return true;\n    }\n    return (\"\" + parseInt(control.value) == control.value)\n  }\n\n  function isDecimalOk() {\n    if ((parameter.empty_string_is_null) && (control.value == \"\")) {\n      return true;\n    }\n    return (\"\" + control.value).match(/^-?(0|[1-9]\\d*)(\\.\\d+)?$/)\n  }\n\n  if (parameter.type == \"integer\") { validator(isIntegerOk)(); }\n  if (parameter.type == \"decimal\") { validator(isDecimalOk)(); }\n  if (parameter.type == \"date\") { validator(isDateOk)(); }\n\n</script>\n\n{#if parameter.type != \"server\"}\n  {#if (!parameter.hasOwnProperty(\"name\"))}\n    <div class=\"deverror\">Parameter should have 'name'</div>\n  {/if}\n  {#if (!control || !control.hasOwnProperty(\"value\"))}\n    <div class=\"deverror\">Control for {parameter.name} should exist and have 'value'</div>\n  {/if}\n{/if}\n\n{#if parameter.type == \"string\"}\n  <input data-highlight-fields={JSON.stringify(parameter.highlight_fields)} id={ \"input-\" + parameter.name } on:focus={onfocus} on:blur={onblur} name={parameter.name} bind:value={control.value} data-parameter-name={parameter.name} >\n{:else if parameter.type == \"date\"}\n  <input data-highlight-fields={JSON.stringify(parameter.highlight_fields)} id={ \"input-\" + parameter.name } on:focus={onfocus} on:blur={onblur} name={parameter.name} type=\"date\" bind:value={control.value} data-parameter-name={parameter.name} on:change={validator(isDateOk)}>\n{:else if parameter.type == \"integer\"}\n  <input data-highlight-fields={JSON.stringify(parameter.highlight_fields)} id={ \"input-\" + parameter.name } on:focus={onfocus} on:blur={onblur} name={parameter.name} type=\"number\" bind:value={control.value} on:change={validator(isIntegerOk)} data-parameter-name={parameter.name}>\n{:else if parameter.type == \"decimal\"}\n  <input data-highlight-fields={JSON.stringify(parameter.highlight_fields)} id={ \"input-\" + parameter.name } on:focus={onfocus} on:blur={onblur} step={getStep(parameter.decimal_places)} name={parameter.name} type=\"number\" bind:value={control.value} on:change={validator(isDecimalOk)} data-parameter-name={parameter.name}>\n{:else if parameter.type == \"server\"}\n  ${parameter.name}\n{:else if parameter.type == \"select\"}\n  {#if control.options }\n    <select data-highlight-fields={JSON.stringify(parameter.highlight_fields)} on:focus={onfocus} on:blur={onblur} id={ \"input-\" + parameter.name } name={parameter.name} bind:value={control.value} data-parameter-name={parameter.name}>\n      {#if parameter.empty_string_is_null}\n        <option value=\"\"></option>\n      {/if}\n      {#each control.options as opt}\n        <option value={opt.value}>{opt.display}</option>\n      {/each}\n    </select>\n  {:else}\n    {#if (\"\" + control.value) != \"\" }\n      <strong>{control.value}</strong>\n    {:else}\n      <strong>${parameter.name}</strong>\n    {/if}\n  {/if}\n{:else if parameter.type == \"popup\"}\n<ParameterPopup popup={popup} onfix={onfix} onerror={onerror} control={control} parameter={parameter} data-parameter-name={parameter.name} />\n{:else if (parameter.type == \"datetime\")}\n<ParameterDateOrDatetime on:newvalue onfix={onfix} onerror={onerror} onfocus={onfocus} onblur={onblur} control={control} parameter={parameter} />\n{:else}\n  {#if (\"\" + control.value) != \"\" }\n    <strong>{control.value}</strong>\n  {:else}\n    <strong>${parameter.name}</strong>\n  {/if}\n{/if}\n","<script>\n  import { getHightlightPositions, getHightlightString } from './ui';\n\n  export let item;\n  export let parameters;\n\n  function getParts(params, theItem) {\n    const parameterNames = Array.from(new Set(params.reduce(\n      (acc, {name, highlight_fields}) => acc.concat(highlight_fields || [name]),\n      []\n    )));\n    return getHightlightString(getHightlightPositions(parameterNames, theItem), theItem);\n  }\n\n</script>\n{#each getParts(parameters, item) as part}\n{#if part.type == \"String\"}\n<span>{part.value}</span>\n{:else}\n<span class=\"field_highlight\" data-field={part.value}>{part.value}</span>\n{/if}\n{/each}\n","<script>\n  import { asRow, normalizeLink, getLink } from \"./controls\";\n  import Link from \"./Link.svelte\";\n\n  export let links;\n  export let controls;\n  export let result;\n\n  function getValuesFromControls(currentControls) {\n    return Object.getOwnPropertyNames(currentControls || {}).map(\n      (name) => {\n        return { name: name, val: currentControls[name].value }\n      }\n    )\n  }\n\n  function getValuesFromResults(currentResults) {\n    if (!currentResults || !currentResults.rows || !currentResults.rows.length) {\n      return [];\n    }\n    return currentResults.fields.map((fld, i) => {\n      return { name: fld.name, val: currentResults.rows[0][i] };\n    });\n  }\n\n  let args = [];\n  let the_links = [];\n\n  $: args = getValuesFromControls(controls || {}).concat(getValuesFromResults(result));\n\n  $: the_links = (links || []).reduce(\n    (acc, link) => {\n      try {\n        return acc.concat([getLink(\n          normalizeLink(args.map(({name}) => name), link),\n          asRow(args.map(({name}) => name), [], args)\n        )]);\n      } catch (e) {\n        return acc;\n      }\n    },\n    []\n  );\n</script>\n\n<div id=\"main_links\">\n  {#each the_links as link}\n  <Link link={link}/>\n  {/each}\n</div>\n","<script>\n\n  import { getHightlightPositions, getHightlightString } from './ui';\n  import { afterUpdate } from 'svelte';\n  import { get as getStoreValue } from 'svelte/store';\n  import ResultTable from \"./ResultTable.svelte\";\n  import Parameter from \"./Parameter.svelte\";\n  import Highlighter from \"./Highlighter.svelte\";\n  import MainLinks from \"./MainLinks.svelte\";\n\n  export let pick;\n  export let run;\n  export let cancelDownload;\n  export let cancel;\n  export let empty;\n  export let popup;\n  export let viewStore;\n  export let download;\n  export let showDownloads;\n  export let toggleShowingSql;\n\n\n  let getColorCache = new Map();\n\n  function getColor(s) {\n    if (getColorCache.has(s)) { return getColorCache.get(s); };\n    let r = Array.from(document.querySelectorAll(`#color-finder-${s}`)).reduce((acc, el) => {\n      return window.getComputedStyle(el).color;\n    }, null);\n    if (r != null) { getColorCache.set(s, r); }\n    return r;\n  }\n\n  let md = new window.markdownit();\n\n  let sidebarActive = false;\n  function showSidebar() { sidebarActive = true; }\n  function hideSidebar() { sidebarActive = false; }\n\n  function resetStylesheet(name) {\n\n    let styleEl = document.getElementById(name);\n    if (!styleEl) {\n      const head = document.head || document.getElementsByTagName('head')[0];\n      styleEl = document.createElement('style');\n      styleEl.id = name;\n      head.appendChild(styleEl);\n    }\n    while (styleEl.sheet.rules.length > 0) {\n      styleEl.sheet.removeRule(0);\n    }\n    return styleEl.sheet;\n  }\n\n  function onfocus({target}) {\n    const stylesheet = resetStylesheet(\"onblur-onfocus-style\");\n    let flds = JSON.parse(target && target.dataset && target.dataset.highlightFields || \"[]\");\n    if (flds.length == 0) { flds = [target.name] }\n    flds.forEach((fld) => {\n      stylesheet.insertRule(`.field_highlight[data-field=\"${fld}\"] { font-weight: bold; color: black; }`);\n    });\n  }\n\n  function onblur({target}) {\n    resetStylesheet(\"onblur-onfocus-style\");\n  }\n\n  let errorFields = new Map();\n\n  function redrawErrorStylesheet() {\n    const stylesheet = resetStylesheet(\"onerror\");\n    const allErrors = new Set();\n    for (const [name, set] of errorFields) {\n      let addedError = false;\n      for (const s of set) {\n        allErrors.add(s);\n        if (!addedError) {\n          stylesheet.insertRule(\n            `.input-popup[data-parameter-name=\"${name}\"], input[data-parameter-name=\"${name}\"], select[data-parameter-name=\"${name}\"] { border-color:${getColor('error')} !important; }`\n          );\n          addedError = true;\n        }\n      }\n    }\n    for (const errorField of allErrors) {\n      stylesheet.insertRule(`.field_highlight[data-field=\"${errorField}\"] { color: ${getColor('error')} !important; }`);\n    }\n  }\n\n  function onerror(name, highlightFields) {\n\n    if (!errorFields.has(name)) { errorFields.set(name, new Set()); }\n    (highlightFields || [name]).forEach((hf) => {\n      errorFields.get(name).add(hf);\n    });\n    redrawErrorStylesheet();\n  }\n\n  function onfix(name, highlightFields) {\n    (highlightFields || [name]).forEach((hf) => {\n      errorFields.get(name) && errorFields.get(name).delete(hf);\n    });\n    redrawErrorStylesheet();\n  }\n\n  function onnewcontrolvalue({detail: { name, control } }) {\n    viewStore.update((vs) => {\n      return {...vs, controls: {...vs.controls, [name]: { ...control } } };\n    });\n  }\n\n  function buttonClass(statementType) {\n    switch (statementType) {\n      case \"INSERT\":\n      case \"DELETE\":\n      case \"UPDATE\":\n        return \"btn-error\";\n      case \"SELECT\":\n        return \"btn-success\";\n    }\n    return \"\";\n  }\n\n  function getDownloads(result) {\n    if (result && result.full_format_urls && result.full_format_urls.length) {\n      return result.full_format_urls\n    }\n    return [];\n  }\n\n  function runDownload(mimeType) {\n    return () => download(mimeType);\n  }\n\n  function parameterIsAvailable(controls) {\n    return (p) => {\n      return controls.hasOwnProperty(p.name);\n    };\n  }\n\n  afterUpdate(() => {\n    if (getStoreValue(viewStore).definition && getStoreValue(viewStore).definition.title) {\n      window.document.title = `eSQLate: ${getStoreValue(viewStore).definition.title}`;\n    }\n    if (getStoreValue(viewStore).loading) {\n      setTimeout(() => {\n        if (getStoreValue(viewStore).loading) {\n          document.getElementById(\"loading-modal\").classList.add(\"loading-notification\");\n        }\n      }, 250);\n    } else {\n      document.getElementById(\"loading-modal\").classList.remove(\"loading-notification\");\n    }\n  })\n\n\n</script>\n\n<div class={ $viewStore.showingMenu ? \"showing-menu off-canvas\" : \"off-canvas\" }>\n  <!-- off-screen toggle button -->\n  <a class=\"off-canvas-toggle btn btn-link\"\n    href=\"#sidebar-id\"\n    on:click|preventDefault={showSidebar}\n    >\n    ☰\n  </a>\n\n  <div id=\"sidebar-id\" class={ (sidebarActive || $viewStore.showingMenu) ? \"off-canvas-sidebar active\" : \"off-canvas-sidebar\" }>\n    <div id=\"logo\">eSQLate</div>\n    <ul id=\"menu\">\n      {#each ($viewStore.menu || []) as item}\n      <li>\n        <a href={\"#/\" + item.name} on:click={hideSidebar}>\n          {item.title}\n        </a>\n      </li>\n      {/each}\n    </ul>\n  </div>\n\n  <a class=\"off-canvas-overlay\"\n    href=\"#close\"\n    on:click|preventDefault={hideSidebar}\n    >&nbsp;</a>\n\n  <div class=\"off-canvas-content\">\n    {#if $viewStore.showingMenu}\n      <div class=\"columns\">\n        <div class=\"column col-auto\" style=\"margin: 3rem auto 0 auto; max-width: 40%\">\n          <h2>Welcome to eSQLate.</h2>\n          <p>This tool enables you to create simple administration panels by writing SQL queries within a simple JSON document.</p>\n        </div>\n      </div>\n    {:else}\n    <div class=\"columns\" id=\"toast-error-wrapper\" style=\"display:none\">\n      <div class=\"column col-auto\" style=\"margin: 3rem auto 0 auto\">\n        <div class=\"toast toast-error\">\n          <button class=\"btn btn-clear float-right\" onclick=\"esqlateHideToastError()\"></button>\n          <div id=\"toast-error-wrapper-text\" style=\"padding: 1em\">\n            xx\n          </div>\n        </div>\n      </div>\n    </div>\n\n    {#if !$viewStore.asPopup}\n      <MainLinks\n        links={ $viewStore.definition.top_links }\n        controls={ $viewStore.controls }\n        result={ $viewStore.result }\n        />\n    {/if}\n\n    <div class={ ($viewStore.asPopup) ? \"modal active in-popup\" : \"no-modal\" } style={$viewStore.statement.length ? \"\" : \"display: none\"}>\n      <a href=\"#close\" on:click|preventDefault={cancel} class=\"modal-overlay\" aria-label=\"Close\">&nbsp;</a>\n      <div class=\"columns\" style={ $viewStore.asPopup ? \"\" : \"margin-top: 2rem\"}>\n        <div class=\"column col-auto modal-container code-popup\" style=\"margin: auto\">\n\n          <div class=\"modal-header\">\n            <div class=\"container\"><div class=\"columns\">\n                <div class=\"column col-9\">\n                  <h3>{ $viewStore.definition.title }</h3><div id=\"color-finder\" style=\"display: none\"><span id=\"color-finder-error\" class=\"text-error\"></span>a<span id=\"color-finder-warning\" class=\"text-warning\">b</span><span id=\"color-finder-success\" class=\"text-success\">c</span></div>\n                </div>\n                <div class=\"column col-3\">\n                  <label class=\"form-switch\" style=\"float: right\">\n                    <input type=\"checkbox\" checked={$viewStore.showingSql ? \"checked\" : \"\"} on:click={toggleShowingSql}>\n                    SQL<i class=\"form-icon\"></i>\n                  </label>\n                </div>\n              </div></div>\n          </div>\n\n          <div class=\"modal-body\" style=\"overflow: unset\">\n            {#if $viewStore.showingSql}\n            <div class=\"container\">\n              <div class=\"col-gapless columns\">\n                <div class=\"column-12\" id=\"code-description-area\">\n                  {#if $viewStore.definition.description }\n                  <div>{@html md.render(\"\" + $viewStore.definition.description) }</div>\n                  {/if}\n                </div>\n              </div>\n              <div class=\"col-gapless columns\">\n                <div class=\"code-code column col-12\" id=\"code-input-area\">\n                  {#each $viewStore.statement as line}\n                  <div class=\"line\">\n                    {#each line as item}\n                    {#if typeof item == \"string\"}\n                    <Highlighter parameters={$viewStore.definition.parameters} item={item}/>\n                    {:else}\n                    <Parameter on:newvalue={onnewcontrolvalue} onfix={onfix} onerror={onerror} onfocus={onfocus} onblur={onblur} popup={popup} bind:control={$viewStore.controls[item.name]} parameter={item}/>\n                    {/if}\n                    {/each}\n                  </div>\n                  {/each}\n                </div>\n              </div>\n            </div>\n            {:else}\n            <div class=\"col-gapless columns code-description\">\n              <div class=\"column-12\" id=\"code-input-area\">\n                {#if $viewStore.definition.description }\n                <div>{@html md.render(\"\" + $viewStore.definition.description) }</div>\n                {/if}\n              </div>\n            </div>\n            <div class=\"form-horizontal code-form\">\n              {#each $viewStore.definition.parameters.filter(parameterIsAvailable($viewStore.controls)) as parameter}\n              <div class=\"form-group\">\n                <div class=\"column col-5 col-sm-12\">\n                  <label class=\"form-label\" for={ \"input-\" + parameter.name }>{parameter.name}</label>\n                </div>\n                <div class=\"column col-7 col-sm-12\">\n                  {#if parameter.type == \"static\"}\n                  <label class=\"form-label\" >\n                  <Parameter on:newvalue={onnewcontrolvalue} onfix={onfix} onerror={onerror} onfocus={onfocus} onblur={onblur} popup={popup} bind:control={$viewStore.controls[parameter.name]} parameter={parameter}/>\n                  </label>\n                  {:else}\n                  <Parameter on:newvalue={onnewcontrolvalue} onfix={onfix} onerror={onerror} onfocus={onfocus} onblur={onblur} popup={popup} bind:control={$viewStore.controls[parameter.name]} parameter={parameter}/>\n                  {/if}\n                </div>\n              </div>\n              {/each}\n            </div>\n            {/if}\n          </div>\n\n          <div class=\"modal-footer\">\n            <div class=\"container\"><div class=\"col-gapless columns\"><div class=\"column col-12\">\n            {#if $viewStore.asPopup}\n            <button class=\"btn btn-link\" on:click={cancel}>Cancel</button>\n            <button class=\"btn\" on:click={empty}>Select Empty Value</button>\n            {/if}\n            <button class={ \"btn btn-primary \" + buttonClass($viewStore.definition.statement_type) } on:click={run}>\n              { $viewStore.definition.statement_type || \"EXECUTE\" }\n            </button>\n            </div></div></div>\n          </div>\n\n          {#if $viewStore.asPopup}\n          <div class=\"modal-body\">\n          <ResultTable controls={$viewStore.controls} pick={pick} inPopup={true} definition={$viewStore.definition} result={$viewStore.result}/>\n          </div>\n          {/if}\n\n        </div>\n      </div>\n    </div>\n\n    {#if $viewStore.showingDownload}\n    <div class=\"modal active\" id=\"modal-id\">\n      <a href=\"#close\" class=\"modal-overlay\" aria-label=\"Close\" on:click|preventDefault={cancelDownload}>&nbsp;</a>\n      <div class=\"modal-container\">\n        <div class=\"modal-header\">\n          <a href=\"#close\" on:click|preventDefault={cancelDownload} class=\"btn btn-clear float-right\" aria-label=\"Close\">&nbsp;</a>\n          <div class=\"modal-title h5\">\n            {#if getDownloads($viewStore.result).length }\n              Please select a download\n            {:else}\n              Preparing downloads\n            {/if}\n          </div>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"content\" style=\"min-height: 2rem\">\n            {#if getDownloads($viewStore.result).length }\n              {#each getDownloads($viewStore.result) as link}\n                <a href=\"#download\" on:click|preventDefault={runDownload(link.type)}>{link.type}</a>\n              {/each}\n            {:else}\n              <div style=\"text-align: center; font-size: 144pt;\">\n                🕓\n              </div>\n            {/if}\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <a href=\"#close\" on:click|preventDefault={cancelDownload} aria-label=\"Close\">Cancel</a>\n        </div>\n      </div>\n    </div>\n    {/if}\n\n    {#if !$viewStore.asPopup}\n    <MainLinks\n      links={ $viewStore.definition.links }\n      controls={ $viewStore.controls }\n      result={ $viewStore.result }\n      />\n    <div style=\"margin-top: 3em\" class={ ($viewStore.asPopup) ? \"in-popup\" : \"\" }>\n      <ResultTable showDownloads={showDownloads} controls={$viewStore.controls} inPopup={false} definition={$viewStore.definition} result={$viewStore.result}/>\n    </div>\n  {/if}\n  {/if}\n  </div>\n</div>\n\n<div class={$viewStore.loading ? \"modal active\" : \"modal\"} id=\"loading-modal\"> \n  <div id=\"loading-modal-content\">\n    🕓\n  </div>\n</div>\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction waitForImpl(repeatEvery, finishRepeatUntil, getTime, f, getNewDelay) {\n    var requestStartTime = getTime();\n    var attempts = 0;\n    var inProgress = false;\n    return new Promise(function (resolve, reject) {\n        function caller() {\n            requestStartTime = getTime();\n            inProgress = true;\n            attempts = attempts + 1;\n            try {\n                f().then(function (r) {\n                    inProgress = false;\n                    if (r.complete) {\n                        finishRepeatUntil(interval);\n                        return resolve(r.value);\n                    }\n                }).catch(function (e) {\n                    finishRepeatUntil(interval);\n                    reject(e);\n                });\n            }\n            catch (e) {\n                finishRepeatUntil(interval);\n                reject(e);\n            }\n        }\n        caller();\n        var interval = repeatEvery(function () {\n            if (inProgress) {\n                return;\n            }\n            if (getTime() - requestStartTime > getNewDelay(attempts)) {\n                caller();\n            }\n        }, 10);\n    });\n}\nexports.waitForImpl = waitForImpl;\nfunction waitFor(f, getNewDelay) {\n    return waitForImpl(setInterval, clearTimeout, function () { return new Date().getTime(); }, f, getNewDelay);\n}\nexports.waitFor = waitFor;\nexports.default = waitFor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getFullUrlFromResponseUrl(apiRoot, responseUrl) {\n    // It may be full...\n    try {\n        return new URL(responseUrl).href;\n    }\n    catch (_e) { }\n    // May not include the protocol\n    const apiRootUrl = new URL(apiRoot);\n    if (responseUrl.substring(0, 2) == \"//\") {\n        return apiRootUrl.protocol + responseUrl;\n    }\n    // May be an absolute path\n    if (responseUrl.substring(0, 1) == \"/\") {\n        return apiRoot.replace(/\\/$/, '') + responseUrl;\n        // return apiRootUrl.protocol + \"//\" + apiRootUrl.hostname +\n        // (apiRootUrl.port ? \":\" + apiRootUrl.port : \"\") +\n        // responseUrl;\n    }\n    // Or something else...\n    throw new Error(\"Cannot handle location \" + responseUrl);\n}\nexports.getFullUrlFromResponseUrl = getFullUrlFromResponseUrl;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst getFullUrlFromResponseUrl_1 = require(\"./getFullUrlFromResponseUrl\");\nfunction getURLSearchParams() {\n    return new URLSearchParams(window.location.hash.replace(/.*\\?/, ''));\n}\nexports.getURLSearchParams = getURLSearchParams;\nfunction getApiRoot() {\n    const bodyElement = document.querySelector(\"body\");\n    const url = bodyElement.dataset.apiServer.replace(/\\/$/, '');\n    if (!url.match(/https?:/)) {\n        return getFullUrlFromResponseUrl_1.getFullUrlFromResponseUrl(window.location.origin, url);\n    }\n    return url;\n}\nexports.getApiRoot = getApiRoot;\nfunction throwOnInvalidStatusCodes(apiUrl, resp) {\n    if ((resp.status < 200) || (resp.status >= 300)) {\n        throw new Error(`HTTP Request to ${apiUrl} returned status code ` +\n            `${resp.status} but I was expecting something in the ` +\n            `200 range`);\n    }\n    return resp;\n}\nfunction getRequest(apiUrl) {\n    const url = getFullUrlFromResponseUrl_1.getFullUrlFromResponseUrl(getApiRoot(), apiUrl);\n    const opts = {\n        mode: \"cors\",\n        cache: \"no-cache\",\n        headers: { \"x-no-redirect\": \"1\", \"Content-Type\": \"application/json\" },\n    };\n    return fetch(url, opts)\n        .then(throwOnInvalidStatusCodes.bind(null, apiUrl));\n}\nexports.getRequest = getRequest;\nfunction postRequest(apiUrl, data) {\n    const url = getFullUrlFromResponseUrl_1.getFullUrlFromResponseUrl(getApiRoot(), apiUrl);\n    const opts = {\n        method: \"POST\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        headers: { \"x-no-redirect\": \"1\", \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data)\n    };\n    return fetch(url, opts)\n        .then(throwOnInvalidStatusCodes.bind(null, apiUrl));\n}\nexports.postRequest = postRequest;\nfunction errorHandler(e) {\n    alert(e.message);\n}\nexports.errorHandler = errorHandler;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst io_1 = require(\"./io\");\nconst esqlate_waitfor_1 = require(\"esqlate-waitfor\");\nconst controls_1 = require(\"./controls\");\nconst esqlate_lib_1 = require(\"esqlate-lib\");\nfunction getInitialViewStore() {\n    return {\n        showingSql: true,\n        showingMenu: false,\n        loading: false,\n        showingDownload: false,\n        definition: {\n            description: \"\",\n            name: \"\",\n            parameters: [],\n            links: [],\n            row_links: [],\n            statement: \"\",\n            title: \"\",\n        },\n        statement: [],\n        result: false,\n        controls: {},\n        asPopup: false,\n        menu: [],\n    };\n}\nexports.getInitialViewStore = getInitialViewStore;\nfunction loadDefinitionHTTP(definitionName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const url = `/definition/${definitionName}`;\n        const resp = yield io_1.getRequest(url);\n        return yield resp.json();\n    });\n}\nexports.loadDefinitionHTTP = loadDefinitionHTTP;\nfunction resultDemandHTTP(definitionName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const data = { \"arguments\": [] };\n        const url = `/demand/${definitionName}`;\n        return io_1.postRequest(url, data)\n            .then(resp => resp.json());\n    });\n}\nexports.resultDemandHTTP = resultDemandHTTP;\nfunction getInitilizeControls(viewStore, getURLSearchParams, cacheSuccessResultForSelect) {\n    return function loadDefinition(ctx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const definition = ctx.definition;\n            const selects = definition.parameters.filter((p) => {\n                return p.type == \"select\";\n            });\n            const options = yield Promise.all(selects.map((parameter) => {\n                return cacheSuccessResultForSelect(parameter.definition)\n                    .then((result) => {\n                    return { parameter, result };\n                });\n            }));\n            const controls = controls_1.getControlStore(controls_1.urlSearchParamsToArguments(getURLSearchParams()), definition.parameters, options);\n            const statement = esqlate_lib_1.newlineBreak(esqlate_lib_1.normalize(definition.parameters, (typeof definition.statement == \"string\") ?\n                esqlate_lib_1.removeLineBeginningWhitespace(definition.statement) :\n                definition.statement));\n            viewStore.update((vs) => (Object.assign(Object.assign({}, vs), { statement, controls })));\n            return ctx;\n        });\n    };\n}\nexports.getInitilizeControls = getInitilizeControls;\nfunction getLoadDefinition(cacheDefinition, viewStore) {\n    return function loadDefinition(ctx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const definition = yield cacheDefinition(ctx.params.definitionName);\n            viewStore.update((vs) => (Object.assign(Object.assign({}, vs), { showingMenu: false, definition })));\n            return Object.assign(Object.assign({}, ctx), { definition });\n        });\n    };\n}\nexports.getLoadDefinition = getLoadDefinition;\nfunction loadResults(fetcher, viewStore, desiredState) {\n    return __awaiter(this, void 0, void 0, function* () {\n        function inDesiredState(statusStr) {\n            return desiredState.indexOf(statusStr) > -1;\n        }\n        function calculateNewDelay(attemptsSoFar) {\n            return attemptsSoFar * 300;\n        }\n        function perform() {\n            return __awaiter(this, void 0, void 0, function* () {\n                const j = yield fetcher();\n                if (inDesiredState(j.status)) {\n                    return { complete: true, value: j };\n                }\n                return { complete: false };\n            });\n        }\n        if (viewStore.result && inDesiredState(viewStore.result.status)) {\n            return Promise.resolve(Object.assign({}, viewStore));\n        }\n        return esqlate_waitfor_1.waitFor(perform, calculateNewDelay)\n            .then((json) => {\n            return Object.assign(Object.assign({}, viewStore), { result: Object.assign(Object.assign({}, viewStore.result), json) });\n        });\n    });\n}\nexports.loadResults = loadResults;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar esqlate_waitfor_1 = __importDefault(require(\"esqlate-waitfor\"));\nfunction getCache(f) {\n    var retreiving = new Set();\n    var values = new Map();\n    var errors = new Map();\n    function getWaitForF(k) {\n        return function () {\n            if (retreiving.has(k)) {\n                return Promise.resolve({ complete: false });\n            }\n            return Promise.resolve({ complete: true, value: true });\n        };\n    }\n    return function getCacheImpl() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var cacheKey = JSON.stringify(args);\n        if (values.has(cacheKey)) {\n            return Promise.resolve(values.get(cacheKey));\n        }\n        if (retreiving.has(cacheKey)) {\n            return esqlate_waitfor_1.default(getWaitForF(cacheKey), function (_n) { return 50; }).then(function () {\n                if (values.has(cacheKey)) {\n                    return Promise.resolve(values.get(cacheKey));\n                }\n                if (errors.has(cacheKey)) {\n                    return Promise.reject(errors.get(cacheKey));\n                }\n                throw new Error(\"Esqlate Cache: WaitFor: Ended without success or error?\");\n            });\n        }\n        retreiving.add(cacheKey);\n        return f.apply(null, args)\n            .then(function (value) {\n            values.set(cacheKey, value);\n            retreiving.delete(cacheKey);\n            return value;\n        })\n            .catch(function (e) {\n            errors.set(cacheKey, e);\n            throw e;\n        });\n    };\n}\nexports.default = getCache;\n","export default function promiseChain(errorHandler, funcs) {\n    let myFuncs = [...funcs];\n    return function promiseChainImpl(...args) {\n        return new Promise((resolve) => {\n            let index = 0;\n            function catcher(e) {\n                errorHandler(e);\n            }\n            function thenF(res) {\n                if (myFuncs.length && (index < myFuncs.length)) {\n                    let f = myFuncs[index++];\n                    const r = f(res);\n                    if (r && r.then) {\n                        return r.then(thenF).catch(catcher);\n                    }\n                    return r;\n                }\n                return resolve(res);;\n            }\n            thenF(args);\n        });\n    };\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst controls_1 = require(\"./controls\");\nfunction getPopupLinkCreator(getURLSearchParams) {\n    return function popup(parameterName, definition, controls) {\n        const definitionName = definition.name;\n        const parameter = definition.parameters\n            .reduce((acc, p) => {\n            return p.name == parameterName ? p : acc;\n        });\n        if (!parameter) {\n            throw new Error(`Could not find Select(name=${parameterName})`);\n        }\n        const qs = controls_1.serializeValues(controls_1.addControlStoreToEsqlateQueryComponents(controls, []));\n        const backRoute = encodeURIComponent(`/${encodeURIComponent(definitionName)}?${qs}`);\n        const existingBack = controls_1.addBackValuesToControlStore(controls_1.urlSearchParamsToArguments(getURLSearchParams()), {});\n        const newBacks = controls_1.pushBackToControlStore(existingBack, {\n            url: backRoute,\n            def: definitionName,\n            fld: parameter.name,\n            val: parameter.value_field,\n            dis: parameter.display_field\n        });\n        const newQs = controls_1.serializeValues(controls_1.addControlStoreToEsqlateQueryComponents(newBacks, []));\n        return `/${encodeURIComponent(parameter.definition)}?${newQs}`;\n    };\n}\nexports.getPopupLinkCreator = getPopupLinkCreator;\nfunction pick(row, query, fields, setNull = false) {\n    const back = controls_1.popBackFromArguments(query);\n    function getFieldIndex(desiredFieldName) {\n        return fields.reduce((acc, f, i) => {\n            if (f.name == desiredFieldName) {\n                return i;\n            }\n            return acc;\n        }, -1);\n    }\n    function getEncodedValue() {\n        const valueIndex = getFieldIndex(back.val);\n        const displayIndex = getFieldIndex(back.dis);\n        if (valueIndex == -1) {\n            throw new Error(`Return is a field that doesn't exist ${back.val}`);\n        }\n        return encodeURIComponent(row[valueIndex]) + \" \" +\n            encodeURIComponent(row[displayIndex]);\n    }\n    const usp = new URLSearchParams(back.url.replace(/.*\\?/, ''));\n    const newQsValues = controls_1.urlSearchParamsToArguments(usp)\n        .filter((esqArg) => esqArg.name != back.fld)\n        .concat([{\n            name: back.fld,\n            val: setNull ? \"\" : getEncodedValue(),\n        }]);\n    const qs = controls_1.serializeValues(controls_1.addControlStoreToEsqlateQueryComponents({}, newQsValues));\n    return `/${encodeURIComponent(back.def)}?${qs}`;\n}\nexports.pick = pick;\n","import { get as getStoreValue, writable } from 'svelte/store';\nimport App from './App.svelte';\nimport { waitFor } from 'esqlate-waitfor';\nimport { getInitialViewStore, loadResults as loadResultsImpl, resultDemandHTTP, loadDefinitionHTTP, getInitilizeControls, getLoadDefinition } from \"./middleware\";\nimport { addControlStoreToEsqlateQueryComponents, popBackFromArguments, serializeValues, queryComponentsToArguments, urlSearchParamsToArguments } from \"./controls\";\nimport { getFullUrlFromResponseUrl } from \"./getFullUrlFromResponseUrl\";\nimport { getApiRoot, getURLSearchParams, getRequest, postRequest } from \"./io\";\nimport getCache from \"esqlate-cache\";\nimport promiseChain from \"./promiseChain\";\nimport { pick as runPick, getPopupLinkCreator } from \"./user-actions\";\n\n\nfunction popup(row) {\n    const runPopup = getPopupLinkCreator(getURLSearchParams);\n    const route = runPopup(row, getStoreValue(viewStore).definition, getStoreValue(viewStore).controls);\n    router.setRoute(route);\n}\n\nfunction pick(row) {\n    const route = runPick(\n        row,\n        urlSearchParamsToArguments(\n            getURLSearchParams()\n        ),\n        getStoreValue(viewStore).result.fields\n    );\n    router.setRoute(route);\n}\n\nfunction download(mimeType) {\n    const otherFormat = getStoreValue(viewStore).result.full_format_urls.filter(\n        (ffu) => ffu.type == mimeType\n    );\n    if (otherFormat.length == 0) {\n        throw Error(`Mime type ${mimeType} was requested but not found`);\n    }\n    window.location = getFullUrlFromResponseUrl(getApiRoot(), otherFormat[0].location);\n}\n\n\nfunction cancelDownload() {\n    router.setRoute(\n        window.location.hash.replace(\n            /^#\\/?([^\\/]+)\\/((result)|(download))/,\n            \"/$1/result\"\n        )\n    );\n}\n\nfunction showDownloads() {\n    router.setRoute(\n        window.location.hash.replace(\n            /^#\\/?([^\\/]+)\\/((result)|(download))/,\n            \"/$1/download\"\n        )\n    );\n}\n\nfunction empty() {\n    const route = runPick(\n        [],\n        urlSearchParamsToArguments(getURLSearchParams()),\n        getStoreValue(viewStore).result.fields,\n        true\n    );\n    router.setRoute(route);\n}\n\nfunction cancel() {\n    router.setRoute(popBackFromArguments(\n        urlSearchParamsToArguments(getURLSearchParams())\n    ).url);\n}\n\nfunction run() {\n    const definitionName = getStoreValue(viewStore).definition.name;\n\n    const qs = serializeValues(\n        addControlStoreToEsqlateQueryComponents(\n            getStoreValue(viewStore).controls,\n            urlSearchParamsToArguments(getURLSearchParams())\n        )\n    );\n    const route = `/${encodeURIComponent(definitionName)}/request?${qs}`\n    router.setRoute(route);\n}\n\n\nfunction toggleShowingSql() {\n    viewStore.update((vs) => {\n        const value = !vs.showingSql;\n        window.localStorage.setItem('showingSql', value);\n        return {...vs, showingSql: value }\n    });\n}\n\n\nfunction hideResults(ctx) {\n    viewStore.update((vs) => ({...vs, result: false }));\n    return Promise.resolve(ctx);\n}\n\n\nfunction createRequest(ctx) {\n\n    const data = {\n        \"arguments\": queryComponentsToArguments(\n            getStoreValue(viewStore).definition.parameters,\n            addControlStoreToEsqlateQueryComponents(\n                getStoreValue(viewStore).controls,\n                urlSearchParamsToArguments(\n                    getURLSearchParams()\n                )\n            )\n        )\n    };\n\n    const url = `/request/${ctx.params.definitionName}`;\n\n    const query = serializeValues(\n        addControlStoreToEsqlateQueryComponents(\n            getStoreValue(viewStore).controls,\n            data.arguments.map(({ name, value }) => ({ name, val: value }))\n        )\n    );\n\n    // TODO: Catch 422 etc\n    return postRequest(url, data)\n        .then(resp => resp.json())\n        .then((json) => {\n            const url = `/${encodeURIComponent(ctx.params.definitionName)}/request/${encodeURIComponent(json.location)}?${query}`;\n            router.setRoute(url);\n            return ctx;\n        });\n}\n\n\nfunction waitForRequest(ctx) {\n\n    function getReady() {\n        return getRequest(ctx.params.requestLocation)\n            .then(resp => resp.json())\n            .then((j) => {\n                if ((j.status == \"preview\") || (j.status == \"complete\")) {\n                    return { complete: true, value: j.location };\n                }\n                return { complete: false };\n            });\n    }\n\n    function calculateNewDelay(attemptsSoFar) { return attemptsSoFar * 300; }\n\n    const qry = addControlStoreToEsqlateQueryComponents(\n        getStoreValue(viewStore).controls,\n        urlSearchParamsToArguments(getURLSearchParams())\n    );\n\n    return waitFor(getReady, calculateNewDelay)\n        .then((loc) => {\n            const url = `/${encodeURIComponent(ctx.params.definitionName)}/result/${encodeURIComponent(loc)}?${serializeValues(qry)}`;\n            router.setRoute(url);\n            return ctx;\n        });\n\n}\n\n\nfunction loadResults(ctx) {\n\n    async function fetcher() {\n        const resp = await getRequest(ctx.params.resultLocation);\n        return await resp.json();\n    }\n\n    const desiredStatus = ctx.params.showingDownload ?\n        [\"error\", \"complete\"] :\n        [\"error\", \"complete\", \"preview\"];\n\n\n    viewStore.update((vs) => {\n        return {\n            ...vs,\n            showingDownload: ctx.params.showingDownload\n        }\n    });\n\n    return loadResultsImpl(fetcher, getStoreValue(viewStore), desiredStatus)\n        .then((vs) => {\n            viewStore.set(vs);\n            return ctx;\n        });\n}\n\n\nfunction setPopupMode(ctx) {\n    viewStore.update((vs) => {\n        const asPopup = urlSearchParamsToArguments(getURLSearchParams())\n            .reduce(\n                (acc, esqArg) => {\n                    return esqArg.name == '_burl0' ? true : acc;\n                },\n                false\n            );\n        return {...vs, asPopup };\n    });\n    return Promise.resolve(ctx);\n}\n\nfunction errorHandler(error) {\n    console.log(error);\n    let message = error;\n    if (error.message) {\n        message = error.message;\n    }\n    document.getElementById(\"loading-modal\").classList.remove(\"active\");\n    esqlateShowToastError(message);\n}\n\nfunction finishedLoading(ctx) {\n    viewStore.update((vs) => {\n        return {...vs, loading: false}\n    });\n    return Promise.resolve(ctx);\n}\nfunction setLoading(ctx) {\n    viewStore.update((vs) => {\n        return {...vs, loading: true}\n    });\n    return Promise.resolve(ctx);\n}\n\nconst viewStore = writable({\n    ...getInitialViewStore(),\n    showingSql: (window.localStorage.getItem('showingSql') === \"false\") ?\n        false :\n        true\n});\n\ngetRequest(\"/definition\")\n    .then(resp => resp.json())\n    .then((menu) => viewStore.update((vs) => ({...vs, menu })));\n\n\nconst cacheDefinition = getCache(loadDefinitionHTTP);\nconst cacheCompleteResultForSelect = getCache(resultDemandHTTP);\n\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n        viewStore,\n        toggleShowingSql,\n        run,\n        popup,\n        pick,\n        empty,\n        cancel,\n        cancelDownload,\n        showDownloads,\n        download,\n    }\n});\n\n\nvar routes = {\n    '/': promiseChain(errorHandler, [\n        ([definitionName]) => {\n            console.log(\"ROUTE:\", '/', window.location);\n            viewStore.update((vs) => ({...vs, showingMenu: true }));\n            return Promise.resolve({ params: { definitionName } });\n        }\n    ]),\n    '/:definitionName': promiseChain(errorHandler, [\n        setLoading,\n        ([definitionName]) => {\n            console.log(\"ROUTE:\", '/:definitionName', [definitionName], window.location);\n            return Promise.resolve({ params: { definitionName } });\n        },\n        hideResults,\n        setPopupMode,\n        getLoadDefinition(cacheDefinition, viewStore),\n        getInitilizeControls(viewStore, getURLSearchParams, cacheCompleteResultForSelect),\n        hideResults,\n        finishedLoading,\n    ]),\n    '/:definitionName/request': promiseChain(errorHandler, [\n        setLoading,\n        ([definitionName]) => {\n            console.log(\"ROUTE:\", '/:definitionName/request', [definitionName], window.location);\n            return Promise.resolve({ params: { definitionName } });\n        },\n        hideResults,\n        setPopupMode,\n        getLoadDefinition(cacheDefinition, viewStore),\n        getInitilizeControls(viewStore, getURLSearchParams, cacheCompleteResultForSelect),\n        hideResults,\n        createRequest,\n    ]),\n    '/:definitionName/request/:requestLocation': promiseChain(errorHandler, [\n        setLoading,\n        ([definitionName, requestLocation]) => {\n            console.log(\"ROUTE:\", '/:definitionName/request/:requestLocation', [definitionName, requestLocation], window.location);\n            return Promise.resolve({\n                params: {\n                    definitionName,\n                    requestLocation: decodeURIComponent(requestLocation)\n                }\n            });\n        },\n        hideResults,\n        setPopupMode,\n        hideResults,\n        getLoadDefinition(cacheDefinition, viewStore),\n        getInitilizeControls(viewStore, getURLSearchParams, cacheCompleteResultForSelect),\n        waitForRequest,\n    ]),\n    '/:definitionName/:resultOrDownload/:resultLocation': promiseChain(errorHandler, [\n        ([definitionName, resultOrDownload, requestLocation]) => {\n            console.log(\"ROUTE:\", '/:definitionName/result/:resultLocation', [definitionName, requestLocation], window.location);\n            if (resultOrDownload == \"result\") {\n                setLoading();\n            }\n            return Promise.resolve({\n                params: {\n                    showingDownload: (resultOrDownload == \"download\"),\n                    definitionName,\n                    resultLocation: decodeURIComponent(requestLocation)\n                }\n            });\n        },\n        setPopupMode,\n        getLoadDefinition(cacheDefinition, viewStore),\n        getInitilizeControls(viewStore, getURLSearchParams, cacheCompleteResultForSelect),\n        loadResults,\n        (ctx) => {\n            const result = getStoreValue(viewStore).result;\n            if (result && result.message) {\n                esqlateShowToastError(result.message);\n            }\n            return Promise.resolve(ctx);\n        },\n        finishedLoading,\n    ]),\n};\n\nif (window.location.hash == \"\") {\n    window.location.hash = \"/\";\n}\n\nlet router;\nrouter = window.Router(routes);\nrouter.configure({\n    notfound: (_r) => {\n        router.setRoute(\"/\");\n    },\n});\nrouter.init();\n\n\nwindow.onerror = errorHandler;\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callback","unsub","unsubscribe","get_store_value","value","_","has_prop","obj","prop","prototype","hasOwnProperty","call","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","this","attr","attribute","removeAttribute","getAttribute","setAttribute","to_number","undefined","set_data","set_input_value","input","set_style","key","important","style","setProperty","select_option","select","option","__value","selected","current_component","set_current_component","component","get_current_component","Error","afterUpdate","$$","after_update","push","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flush","seen_callbacks","Set","shift","update","pop","has","add","fragment","dirty","before_update","p","ctx","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","globals","window","global","bind","props","bound","create_component","mount_component","on_mount","on_destroy","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","init","instance","create_fragment","not_equal","parent_component","prop_values","context","Map","ready","ret","hydrate","l","Array","from","childNodes","intro","SvelteComponent","[object Object]","$destroy","index","indexOf","splice","subscriber_queue","ProcessDateTimeWhich","LineType","defineProperty","exports","decimalPlaceCount","control","indexOfT","date","substring","time","which","DATE","TIME","params","bitOfSql","reduce","acc","param","concat","s","lastPos","some","match","begin","end","findAll","highlightPositions","sorted","sort","hpa","hpb","hp","String","Field","link","href","class","peg$SyntaxError","message","expected","found","location","captureStackTrace","child","parent","ctor","constructor","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","escapedParts","parts","classEscape","inverted","any","other","description","hex","ch","charCodeAt","toString","toUpperCase","replace","j","descriptions","join","describeExpected","describeFound","SyntaxError","parse","peg$result","peg$FAILED","peg$startRuleFunctions","Statement","peg$parseStatement","peg$startRuleFunction","peg$c0","peg$c1","peg$literalExpectation","peg$c2","peg$c3","peg$c4","f","v","function","variable","peg$c5","peg$c6","peg$c7","vs","peg$c8","peg$c9","peg$c10","t","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$classExpectation","peg$c18","x","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$currPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","startRule","ignoreCase","peg$computePosDetails","pos","details","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","start","offset","peg$fail","s0","s1","peg$parseComplexFunction","peg$parseSimpleVariable","peg$parseText","s2","s3","s4","s5","peg$parseDollar","test","charAt","peg$parseFunction","peg$parseFunctionCall","peg$parseValidVariableName","peg$parseComplexVariable","peg$parseErrorDollar","peg$parseEscapedDollar","peg$parseNotDollar","substr","ParsedType","__read","n","Symbol","iterator","ar","next","done","error","__spread","arguments","rawParse","parser","newlineBreak","statement","allButLast","last","item","_a","split","split0","splitRest","html_line","pre","tagIdClass","inner","ed","attrs","postNewlineRemove","parameters","stat","innerAcc","TEXT","findingName","find","getParameter","forHyper","h","hdoc","hd","renderLinkText","row","escape","getParameters","nofs","nof","callF","ela","fun","namesOfFields","encodeURIComponent","ei","url","k","entries","val","cs","esqArg","fromCs","getOwnPropertyNames","getValue","query","esqlateDefinitionParameters","optionsForSelect","inputValues","set","selectSetValue","op","get","parameter","ps","result","status","valueIndex","displayIndex","fields","fld","value_field","display_field","display","getOptions","assign","values","ea","parameterCounts","popup","process","textOrHref","esqlate_lib_1","par","rawRow","args","argsAsOb","arg","field","qry","csv","desiredNumber","parseInt","getBackNumber","decodeURIComponent","def","dis","queryComps","popups","qc","debounce","func","wait","immediate","timeout","timestamp","later","Date","now","setTimeout","apply","debounced","callNow","clear","clearTimeout","definition","row_links","inPopup","rows","full_data_set","alignment","getFormatter","cell","getLink","normalizeLink","getFieldnames","asRow","showDownloads","id","controls","pick","syncTable","stylesheet","getElementById","sheet","rules","removeRule","resetStylesheet","requiredWidth","getBoundingClientRect","width","insertRule","dateFormatter","Intl","DateTimeFormat","navigator","language","year","month","day","timestampFormatter","hour","minute","second","formatters","format","onresize","currentControls","getValuesFromControls","currentResults","getValuesFromResults","sqlType","myArgs","JSON","stringify","highlight_fields","initializeDateTime","onblur","onfocus","onerror","onfix","dispatchNewValue","emptyCheck","empty_string_is_null","evtValue","processDateTime","getDisplayValue","controlValue","getStep","decimal_places","validator","isDecimalOk","isIntegerOk","isDateOk","opt","validationFunc","selected_option","querySelector","part","getParts","theItem","parameterNames","getHightlightString","getHightlightPositions","the_links","links","title","hideSidebar","$viewStore","statement_type","asPopup","showingSql","showingDownload","buttonClass","toggleShowingSql","top_links","parameterIsAvailable","md","render","getDownloads","cancelDownload","runDownload","menu","showingMenu","sidebarActive","loading","showSidebar","styleEl","head","getElementsByTagName","flds","dataset","highlightFields","statementType","full_format_urls","cancel","viewStore","download","getColorCache","getColor","querySelectorAll","el","getComputedStyle","color","markdownit","errorFields","redrawErrorStylesheet","allErrors","addedError","errorField","getStoreValue","classList","remove","hf","mimeType","waitForImpl","repeatEvery","finishRepeatUntil","getTime","getNewDelay","requestStartTime","attempts","inProgress","reject","caller","complete","interval","catch","waitFor","setInterval","apiRoot","responseUrl","URL","_e","apiRootUrl","protocol","getApiRoot","apiServer","getFullUrlFromResponseUrl_1","getFullUrlFromResponseUrl","origin","throwOnInvalidStatusCodes","apiUrl","resp","URLSearchParams","hash","fetch","mode","cache","headers","x-no-redirect","Content-Type","opts","method","body","alert","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","definitionName","io_1","getRequest","json","postRequest","getURLSearchParams","cacheSuccessResultForSelect","selects","all","controls_1","getControlStore","urlSearchParamsToArguments","normalize","removeLineBeginningWhitespace","cacheDefinition","fetcher","desiredState","inDesiredState","statusStr","esqlate_waitfor_1","attemptsSoFar","__importDefault","mod","__esModule","default","require$$0","retreiving","errors","_i","cacheKey","_n","promiseChain","errorHandler","funcs","myFuncs","catcher","thenF","res","parameterName","qs","serializeValues","addControlStoreToEsqlateQueryComponents","backRoute","existingBack","addBackValuesToControlStore","newBacks","pushBackToControlStore","newQs","setNull","back","popBackFromArguments","getFieldIndex","desiredFieldName","usp","newQsValues","getEncodedValue","hideResults","setPopupMode","console","log","esqlateShowToastError","finishedLoading","setLoading","stop","subscribers","new_value","run_queue","invalidate","subscriber","writable","getInitialViewStore","localStorage","getItem","getCache","loadDefinitionHTTP","cacheCompleteResultForSelect","resultDemandHTTP","app","setItem","route","router","setRoute","getPopupLinkCreator","runPopup","runPick","otherFormat","ffu","routes","/","/:definitionName","getLoadDefinition","getInitilizeControls","/:definitionName/request","queryComponentsToArguments","/:definitionName/request/:requestLocation","requestLocation","loc","/:definitionName/:resultOrDownload/:resultLocation","resultOrDownload","resultLocation","desiredStatus","loadResultsImpl","async","Router","configure","notfound","_r"],"mappings":"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"}